<!doctype html>
<html lang="en">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>RideWise â€“ Refactored Demo</title>
Â  <style>
Â  Â  /* NEW COLOR PALETTE: Blue/Teal Theme */
Â  Â  :root{
Â  Â  Â  --bg:#f0f9ff; /* Sky Blue Light */
Â  Â  Â  --card:#ffffff;
Â  Â  Â  --ink:#0f172a;
Â  Â  Â  --muted:#475569;
Â  Â  Â  --line:#e0f2f1; /* Light Teal Line */
Â  Â  Â  --primary:#0ea5e9; /* Sky Blue */
Â  Â  Â  --secondary:#14b8a6; /* Teal */
Â  Â  Â  --primary-ink:white;
Â  Â  Â  --secondary-ink:white;
Â  Â  Â  --radius:16px;
Â  Â  }
Â  Â  *{box-sizing:border-box}
Â  Â  body{
Â  Â  Â  margin:0;
Â  Â  Â  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
Â  Â  Â  color:var(--ink);
Â  Â  Â  background:var(--bg);
Â  Â  Â  font-size:15px;
Â  Â  Â  min-height: 100vh;
Â  Â  Â  padding-bottom: 70px; /* Space for the fixed bottom nav */
Â  Â  }
Â  Â  button,input,select,textarea{font:inherit}
Â  Â  a{color:inherit}

Â  Â  /* Layout */
Â  Â  .container{max-width:400px;margin-inline:auto;padding:16px} /* Optimized for mobile view */
Â  Â  .row{display:grid;gap:16px}
Â  Â  @media(min-width:900px){.row-5{grid-template-columns:3fr 2fr}}

Â  Â  /* UI atoms */
Â  Â  .top-nav{
Â  Â  Â  display:flex;
Â  Â  Â  align-items:center;
Â  Â  Â  padding:12px 16px;
Â  Â  Â  background:var(--card);
Â  Â  Â  border-bottom:1px solid var(--line);
Â  Â  }
Â  Â Â 
Â  Â  /* Bottom Navigation */
Â  Â  .bottom-nav{
Â  Â  Â  position:fixed;
Â  Â  Â  bottom:0;
Â  Â  Â  left:0;
Â  Â  Â  right:0;
Â  Â  Â  z-index:100;
Â  Â  Â  background:var(--card);
Â  Â  Â  border-top:1px solid var(--line);
Â  Â  Â  display:flex;
Â  Â  Â  justify-content:space-around;
Â  Â  Â  padding:8px 0;
Â  Â  Â  max-width: 400px;
Â  Â  Â  margin-inline: auto;
Â  Â  }
Â  Â  .nav-item{
Â  Â  Â  display:flex;
Â  Â  Â  flex-direction:column;
Â  Â  Â  align-items:center;
Â  Â  Â  font-size:12px;
Â  Â  Â  color:var(--muted);
Â  Â  Â  cursor:pointer;
Â  Â  Â  padding:4px;
Â  Â  Â  background:transparent;
Â  Â  Â  border:none;
Â  Â  Â  text-decoration:none;
Â  Â  }
Â  Â  .nav-item.active{
Â  Â  Â  color:var(--primary);
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â  .nav-icon{
Â  Â  Â  font-size:20px;
Â  Â  Â  margin-bottom:2px;
Â  Â  Â  line-height:1;
Â  Â  }

Â  Â  .badge{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border:1px solid var(--line);border-radius:999px;background:#fff;font-size:12px;color:#0f172a}
Â  Â  .btn{
Â  Â  Â  display:inline-flex;
Â  Â  Â  align-items:center;
Â  Â  Â  gap:8px;
Â  Â  Â  padding:10px 14px;
Â  Â  Â  border:1px solid var(--line);
Â  Â  Â  background:#fff;
Â  Â  Â  border-radius:12px;
Â  Â  Â  cursor:pointer;
Â  Â  Â  white-space:nowrap;
Â  Â  }
Â  Â  .btn:hover{background:#f1f5f9}
Â  Â  .btn.primary{background:var(--primary);color:var(--primary-ink);border-color:var(--primary)}
Â  Â  .btn.secondary{background:var(--secondary);border-color:var(--secondary);color:var(--secondary-ink)}
Â  Â  .btn.ghost{border-color:transparent;background:transparent}
Â  Â  .btn.block{width:100%;justify-content:center}
Â  Â  .btn.large{padding:20px 24px; font-size:18px; border-width: 2px; border-radius: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);}
Â  Â  .btn.large.primary{background:var(--primary);color:white}
Â  Â  .btn.large.secondary{background:var(--secondary);color:white}
Â  Â Â 
Â  Â  .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius); box-shadow: 0 2px 4px rgba(0,0,0,0.05)}
Â  Â  .card-h{padding:14px 16px;border-bottom:1px solid var(--line);display:flex;align-items:center;gap:8px}
Â  Â  .card-c{padding:14px 16px}
Â  Â  .pill{border:1px solid var(--line);border-radius:12px;padding:8px 10px}
Â  Â  .label{font-size:12px;color:var(--muted);margin-bottom:6px}
Â  Â  .input{width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:12px}
Â  Â  .muted{color:var(--muted)}
Â  Â  .title{font-weight:700}
Â  Â  .hidden{display:none !important}

Â  Â  /* Map mock */
Â  Â  .map{
Â  Â  Â  position:relative;
Â  Â  Â  min-height:200px; /* Reduced height for mobile view */
Â  Â  Â  border:1px solid var(--line);
Â  Â  Â  border-radius:var(--radius);
Â  Â  Â  overflow:hidden;
Â  Â  Â  background-color:#e0e0e0;
Â  Â  }
Â  Â  .map-chip{position:absolute;top:12px;left:12px;z-index:2}
Â  Â Â 
Â  Â  /* New: Impact Summary Card */
Â  Â  .impact-card {
Â  Â  Â  background: var(--card);
Â  Â  Â  border-radius: var(--radius);
Â  Â  Â  padding: 16px;
Â  Â  Â  box-shadow: 0 4px 6px rgba(0,0,0,0.05);
Â  Â  }
Â  Â  .impact-grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  Â  gap: 10px;
Â  Â  Â  text-align: center;
Â  Â  }
Â  Â  .metric-value-small {
Â  Â  Â  font-size: 24px;
Â  Â  Â  font-weight: 700;
Â  Â  Â  color: var(--primary);
Â  Â  Â  display: block;
Â  Â  Â  margin-bottom: 2px;
Â  Â  }
Â  Â  .metric-label {
Â  Â  Â  font-size: 13px;
Â  Â  Â  color: var(--muted);
Â  Â  }
Â  Â Â 
Â  Â  /* New: Get Started List */
Â  Â  .action-list {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 12px;
Â  Â  Â  margin-top: 16px;
Â  Â  }
Â  Â  .action-item {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 12px 16px;
Â  Â  Â  background: var(--card);
Â  Â  Â  border-radius: var(--radius);
Â  Â  Â  border: 1px solid var(--line);
Â  Â  }
Â  Â  .action-icon {
Â  Â  Â  font-size: 24px;
Â  Â  Â  margin-right: 12px;
Â  Â  }
Â  Â  .action-title {
Â  Â  Â  font-weight: 600;
Â  Â  Â  font-size: 16px;
Â  Â  }
Â  Â  .action-caption {
Â  Â  Â  color: var(--muted);
Â  Â  Â  font-size: 13px;
Â  Â  }
Â  Â  .action-tag {
Â  Â  Â  margin-left: auto;
Â  Â  Â  background: #fef08a; /* Yellow */
Â  Â  Â  color: #854d0e;
Â  Â  Â  padding: 4px 8px;
Â  Â  Â  border-radius: 999px;
Â  Â  Â  font-size: 12px;
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â Â 
Â  Â  /* Overriding for simplified look */
Â  Â  .screen.active {padding-top: 0;}
Â  Â  .section {padding-block: 0;}
Â  </style>
</head>
<body>
Â  Â  <div class="top-nav">
Â  Â  <div style="display:flex;align-items:center;gap:8px">
Â  Â  Â  <div class="nav-icon" style="color:var(--primary)">ğŸš—</div>
Â  Â  Â  <strong style="font-size:18px">RideWise</strong>
Â  Â  </div>
Â  </div>

Â  <main id="screens">
Â  Â  Â  Â  <section id="welcome" class="screen active">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px">
Â  Â  Â  Â  Â  <button class="btn large primary" data-goto="find">
Â  Â  Â  Â  Â  Â  <div class="nav-icon">ğŸ”</div>
Â  Â  Â  Â  Â  Â  Find Ride
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  <button class="btn large secondary" data-goto="offer">
Â  Â  Â  Â  Â  Â  <div class="nav-icon">â•</div>
Â  Â  Â  Â  Â  Â  Offer Ride
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="impact-card" style="margin-top:16px;">
Â  Â  Â  Â  Â  <div class="label" style="text-align:center;margin-bottom:8px;">Your Impact</div>
Â  Â  Â  Â  Â  <div class="impact-grid">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <span class="metric-value-small" id="homeRides">0</span>
Â  Â  Â  Â  Â  Â  Â  <span class="metric-label">Rides</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <span class="metric-value-small" id="homeSaved">$0</span>
Â  Â  Â  Â  Â  Â  Â  <span class="metric-label">Saved</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <span class="metric-value-small" id="homeCo2">0kg</span>
Â  Â  Â  Â  Â  Â  Â  <span class="metric-label">COâ‚‚ Cut</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label" style="margin-top:20px;margin-bottom:8px;">Map Overview</div>
Â  Â  Â  Â  <div class="map" id="map">
Â  Â  Â  Â  Â  <div class="badge map-chip">ğŸ“ SFU Burnaby Campus Area</div>
Â  Â  Â  Â  Â  <iframe
Â  Â  Â  Â  Â  Â  width="100%"
Â  Â  Â  Â  Â  Â  height="100%"
Â  Â  Â  Â  Â  Â  frameborder="0"
Â  Â  Â  Â  Â  Â  style="border:0;"
Â  Â  Â  Â  Â  Â  referrerpolicy="no-referrer-when-downgrade"
Â  Â  Â  Â  Â  Â  src="https://maps.google.com/maps?width=100%&height=100%&hl=en&q=SFU+Burnaby+Campus&t=&z=14&ie=UTF8&iwloc=B&output=embed"
Â  Â  Â  Â  Â  Â  allowfullscreen>
Â  Â  Â  Â  Â  </iframe>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="label" style="margin-top:20px;margin-bottom:8px;">Get Started</div>
Â  Â  Â  Â  <div class="action-list">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="action-item" onclick="show('onboard')">
Â  Â  Â  Â  Â  Â  <span class="action-icon">ğŸ‘¤</span>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="action-title">Complete Your Profile</div>
Â  Â  Â  Â  Â  Â  Â  <div class="action-caption">Add photo and preferences</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <span class="action-tag">Required</span>
Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="action-item" onclick="show('registerCar')">
Â  Â  Â  Â  Â  Â  <span class="action-icon">ğŸš—</span>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="action-title">Register Your Vehicle</div>
Â  Â  Â  Â  Â  Â  Â  <div class="action-caption">Share car details for safety</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="action-item" onclick="show('profile')">
Â  Â  Â  Â  Â  Â  <span class="action-icon">ğŸ›¡ï¸</span>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="action-title">Add Emergency Contact</div>
Â  Â  Â  Â  Â  Â  Â  <div class="action-caption">For your peace of mind</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>

Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â  <section id="onboard" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <h2 class="title" style="display:flex;align-items:center;gap:8px">â† <button class="btn ghost" data-goto="welcome">Back</button> Set up your commuter profile</h2>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>ğŸ›¡ï¸ Student Verification (SFU)</strong></div>
Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  <div class="label">Full Name (used for your profile)</div>
Â  Â  Â  Â  Â  Â  <input class="input" id="onboardName" placeholder="e.g., Alex Chan" style="margin-bottom:12px" />
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="label">SFU Email (for verification)</div>
Â  Â  Â  Â  Â  Â  <input class="input" id="onboardEmail" placeholder="e.g., xxx@sfu.ca" style="margin-bottom:12px" />
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="label">SFU Student ID (for mock verification)</div>
Â  Â  Â  Â  Â  Â  <input class="input" id="onboardStudentId" placeholder="e.g., 301XXXXXX" />
Â  Â  Â  Â  Â  Â  <p class="muted" style="font-size:14px;margin-top:6px">This step builds community trust and is required to join/post rides.</p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="row grid-2" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>How do you want to use RideWise?</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  Â  <div class="grid-2">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px">ğŸš— <div><div class="title">Offer rides (Driver)</div><div class="muted" style="font-size:14px">Share seats when it works for you.</div></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="asDriver" type="checkbox" class="switch" />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px">ğŸ‘¤ <div><div class="title">Find rides (Rider)</div><div class="muted" style="font-size:14px">Match with nearby drivers to SFU.</div></div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="asRider" type="checkbox" class="switch" checked />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Preferences</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px">
Â  Â  Â  Â  Â  Â  Â  Â  <span>Carpool Mode (show me as available)</span>
Â  Â  Â  Â  Â  Â  Â  Â  <input id="carpoolMode" type="checkbox" class="switch" checked />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px">
Â  Â  Â  Â  Â  Â  Â  Â  <span>Friends-only mode</span>
Â  Â  Â  Â  Â  Â  Â  Â  <input id="friendsOnly" type="checkbox" class="switch" />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="pill">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Gender preference</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender="any">Any</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender="female">Female</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender="male">Male</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;justify-content:end;margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn primary" onclick="completeOnboarding()">Verify & Continue âœ</button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â  <section id="registerCar" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <h2 class="title" style="display:flex;align-items:center;gap:8px">â† <button class="btn ghost" data-goto="onboard">Back</button> Register your car</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="muted" style="margin-top:4px">This helps riders feel safe and confident knowing the vehicle details for pickup.</p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Vehicle Details</strong></div>
Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  <div style="margin-bottom:12px">
Â  Â  Â  Â  Â  Â  Â  <div class="label">Car Make</div>
Â  Â  Â  Â  Â  Â  Â  <input class="input" id="carMake" placeholder="e.g., Honda" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="margin-bottom:12px">
Â  Â  Â  Â  Â  Â  Â  <div class="label">Car Model</div>
Â  Â  Â  Â  Â  Â  Â  <input class="input" id="carModel" placeholder="e.g., Civic" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="margin-bottom:12px">
Â  Â  Â  Â  Â  Â  Â  <div class="label">License Plate (for mock verification)</div>
Â  Â  Â  Â  Â  Â  Â  <input class="input" id="carPlate" placeholder="e.g., ABC 123" />
Â  Â  Â  Â  Â  Â  Â  <p class="muted" style="font-size:14px;margin-top:6px">The plate is only shown to matched riders just before pickup.</p>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div style="display:flex;justify-content:end;margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  <button class="btn primary" onclick="completeCarRegistration()">Save & Continue âœ</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>
Â  Â Â 
Â  Â  Â  Â Â 
Â  Â  <section id="home" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <div id="home-greeting" style="margin-bottom:16px;"></div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div style="display:flex;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  <div style="flex:1 1 180px">
Â  Â  Â  Â  Â  Â  <input id="search" class="input" placeholder="Search driver, pickup, or drop-off" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <button class="btn" data-goto="find">â›­ Filters</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="row row-5" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="col" style="grid-column: 1 / -1;">
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Available rides</strong> <span class="muted" id="count" style="margin-left:auto"></span></div>
Â  Â  Â  Â  Â  Â  Â  <div class="card-c" id="rideList"></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="grid-actions" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  <button class="btn secondary" data-goto="offer">ï¼‹ Offer a ride</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-goto="find">â†º Find a ride</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  <div class="card-c" style="display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title">Campus impact</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  RideWise users saved <b><span id="co2">18.4</span> kg</b> COâ‚‚
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn ghost" data-goto="rewards">ğŸŒ¿ View rewards</button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â Â 
Â  Â  Â  Â  <section id="offer" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px" class="title">â† <button class="btn ghost" data-goto="welcome">Back</button> Offer a ride</div>
Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Trip details</strong></div>
Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  <div class="grid-2">
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">From (Pickup Location)</div>
Â  Â  Â  Â  Â  Â  Â  Â  <select class="input" id="offerFrom">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Production Wayâ€“University Station" selected>Production Wayâ€“University Station</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Lougheed Town Centre">Lougheed Town Centre</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Surrey Central">Surrey Central</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Metrotown Station">Metrotown Station</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Burquitlam Station">Burquitlam Station</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Custom">Other (Type below)</option>
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">To (Drop-off Campus)</div>
Â  Â  Â  Â  Â  Â  Â  Â  <select class="input" id="offerTo">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="SFU Burnaby" selected>SFU Burnaby</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="SFU Surrey">SFU Surrey</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="SFU Vancouver">SFU Vancouver</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Custom">Other (Type below)</option>
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="grid-2 hidden" id="customLocations" style="margin-top:8px">
Â  Â  Â  Â  Â  Â  Â  <div><input class="input" id="offerFromCustom" placeholder="Type custom pickup location" /></div>
Â  Â  Â  Â  Â  Â  Â  <div><input class="input" id="offerToCustom" placeholder="Type custom drop-off location" /></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="grid-3" style="margin-top:8px">
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Departure time</div>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" class="input" id="offerTime" value="09:00" />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Seats</div>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" class="input" id="offerSeats" min="1" max="4" value="2" />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Cost share ($ est.)</div>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" class="input" id="offerCost" min="0" step="0.5" value="2" />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="margin-top:8px">
Â  Â  Â  Â  Â  Â  Â  <div class="label">Notes (optional)</div>
Â  Â  Â  Â  Â  Â  Â  <textarea class="input" id="offerNotes" rows="3" placeholder="e.g., Quiet ride, no food please"></textarea>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:8px">
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="title" style="font-weight:600">Friends-only mode</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Only show to people you follow or have ridden with</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <input id="offerFriends" type="checkbox" class="switch" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="display:flex;justify-content:end;gap:8px;margin-top:12px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-goto="home">Cancel</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn primary" id="postRide">Post ride</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <section id="find" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px" class="title">â† <button class="btn ghost" data-goto="home">Back</button> Find a ride</div>
Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Filters</strong></div>
Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  <div class="grid-3">
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Earliest time</div>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="time" class="input" id="filterTime" />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Gender preference</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender-filter="any">Any</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender-filter="female">Female</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender-filter="male">Male</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Filter by Course Match</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-course-filter="none">All Rides</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-course-filter="cmpt300">CMPT 300</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-course-filter="bus343">BUS 343</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="display:flex;justify-content:end;margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  <button class="btn primary" data-apply-filters>Apply</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Results</strong> <span class="muted" id="resultsCount" style="margin-left:auto"></span></div>
Â  Â  Â  Â  Â  <div class="card-c" id="results"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <section id="details" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px" class="title" id="detailsHeader"></div>
Â  Â  Â  Â  <div class="card" style="margin-top:12px" id="detailsCard">
Â  Â  Â  Â  Â  <div class="card-c">No ride selected.</div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>
Â  Â Â 
Â  Â  <section id="messages" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <h2 class="title" style="display:flex;align-items:center;gap:8px">â† <button class="btn ghost" data-goto="welcome">Back</button> Messaging & Chat</h2>
Â  Â  Â  Â  <p class="muted" style="margin-top:4px">Private chats with drivers/riders you've matched with, and group chats for your rides.</p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="row grid-2" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Recent Chats</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  Â  <button class="row-item" style="margin-bottom:8px" onclick="showChat('chat-maya')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="avatar" style="background:#fef3c7">AT</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title">Annika Tan <span class="badge" style="background:#d1fae5">1 new</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Just checking on the pickup spot...</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <span>></span>
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  <button class="row-item" style="margin-bottom:8px" onclick="showChat('chat-alex')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="avatar" style="background:#ffe4e6">KS</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title">Kaidin SD</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">See you at 8:40!</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <span>></span>
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  <button class="row-item" onclick="showChat('chat-group')">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="avatar">GS</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title">SFU Bus Loop Group Chat</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Rex: Running 2 mins late, guys.</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <span>></span>
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>New Message</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  Â  <div class="label">Select Contact or Start Group Chat</div>
Â  Â  Â  Â  Â  Â  Â  <input class="input" id="newChatInput" placeholder="Search contacts (e.g., Rex, Annika)" />
Â  Â  Â  Â  Â  Â  Â  <button class="btn primary block" style="margin-top:12px" onclick="initiateNewChat()">Start Chat</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <section id="rewards" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px" class="title">â† <button class="btn ghost" data-goto="welcome">Back</button> Rewards & Impact</div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="row grid-2" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Your progress</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  Â  <div class="grid-3">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="text-align:center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted">WisePoints</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title metric-value" id="points">120</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="text-align:center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted">COâ‚‚ saved</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title metric-value"><span id="co2Big">18.4</span> kg</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="text-align:center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted">Badges</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title metric-value">3</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="grid-2" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="k full-width">Students may redeem their points for discounts on campus restaurants and coffee shops.</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Campus leaderboard</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c" id="leaderboard"></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="card" style="margin-top:16px">
Â  Â  Â  Â  Â  <div class="card-h">Daily Missions</div>
Â  Â  Â  Â  Â  <div class="card-c" id="missionsBar"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:16px">
Â  Â  Â  Â  Â  <div class="card-h">Referral Bonus</div>
Â  Â  Â  Â  Â  <div class="card-c" style="text-align:center">
Â  Â  Â  Â  Â  Â  <p class="title" style="margin-bottom:8px">Invite a friend and get 50 WisePoints each!</p>
Â  Â  Â  Â  Â  Â  <div class="pill" style="display:inline-flex;align-items:center;gap:12px;flex-wrap:wrap;justify-content:center">
Â  Â  Â  Â  Â  Â  Â  <span class="muted">Your Code:</span>
Â  Â  Â  Â  Â  Â  Â  <strong id="referralCodeDisplay">SFU-RIDE-JANE</strong>
Â  Â  Â  Â  Â  Â  Â  <button class="btn primary small">Share</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <p class="muted" style="font-size:14px;margin-top:8px">Earn unlimited rewards when your friends complete their first ride.</p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:16px">
Â  Â  Â  Â  Â  <div class="card-h">Environmental Trophies</div>
Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  <div class="trophy-grid" id="trophyGrid"></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <section id="profile" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px" class="title">â† <button class="btn ghost" data-goto="welcome">Back</button> Profile & Preferences</div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="card" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Complete Your Profile</strong></div>
Â  Â  Â  Â  Â  <div class="card-c" style="display:flex;align-items:center;gap:16px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  <div style="flex:1 1 180px">
Â  Â  Â  Â  Â  Â  Â  <div class="title" style="font-weight:600">Finish setting up your profile for higher trust and more matches.</div>
Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px;margin-top:4px">Remaining steps: Add a photo, verify car details, set bio.</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button class="btn primary">Update Photo (Mock)</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="row" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Your profile</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="avatar" id="profileAvatar">GR</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="title" id="profileName">Guest Rider</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Rating: 4.9 â€¢ 12 rides</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="grid-2">
Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Carpool mode</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" class="switch" id="pfCarpool" checked />
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  <label class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Friends-only</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" class="switch" id="pfFriends" />
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="pill" style="margin-top:8px">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="label">Gender preference</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender="any">Any</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender="female">Female</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-gender="male">Male</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Ride etiquette (What riders should know)</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c" id="etiquetteOptions" style="display:flex;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-etiquette="Quiet">Quiet</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-etiquette="Music OK">Music OK</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-etiquette="No food">No food</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-etiquette="Trunk space limited">Trunk space limited</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-etiquette="Mask friendly">Mask friendly</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn" data-etiquette="Women-only">Women-only (if preferred)</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="card" style="margin-top:16px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Favorite Riders/Drivers</strong></div>
Â  Â  Â  Â  Â  <div class="card-c" id="favoritesList">
Â  Â  Â  Â  Â  Â  <button class="row-item" style="margin-bottom:8px">
Â  Â  Â  Â  Â  Â  Â  <div class="avatar" style="background:#ffe4e6">KS</div>
Â  Â  Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="title">Kaidin SD</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Driver â€¢ Rating: 4.8</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <button class="btn ghost">Remove</button>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <button class="row-item">
Â  Â  Â  Â  Â  Â  Â  <div class="avatar" style="background:#fef3c7">AT</div>
Â  Â  Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="title">Annika Tan</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Rider â€¢ Rating: 5.0</div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <button class="btn ghost">Remove</button>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="card" style="margin-top:16px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Contacts & Friends</strong></div>
Â  Â  Â  Â  Â  <div class="card-c" id="contactsList">
Â  Â  Â  Â  Â  Â  <p class="muted" style="font-size:14px">Friends are automatically trusted and exempt from "Friends-only mode" rides.</p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="card" style="margin-top:16px">
Â  Â  Â  Â  Â  <div class="card-h"><strong>Emergency Contact</strong></div>
Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  <p class="muted" style="font-size:14px;margin-bottom:12px">Your emergency contact will be notified only if the in-app SOS feature is activated during a ride.</p>
Â  Â  Â  Â  Â  Â  <div style="margin-bottom:12px">
Â  Â  Â  Â  Â  Â  Â  <div class="label">Name</div>
Â  Â  Â  Â  Â  Â  Â  <input class="input" id="ecName" placeholder="e.g., Mom" value="Sarah Doe" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="margin-bottom:12px">
Â  Â  Â  Â  Â  Â  Â  <div class="label">Phone Number</div>
Â  Â  Â  Â  Â  Â  Â  <input type="tel" class="input" id="ecPhone" placeholder="e.g., 555-123-4567" value="555-123-4567" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div style="display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  <button class="btn brand" onclick="alert('Mock Accident Report: Details collected and emergency contact notified.')">âš ï¸ Emergency Accident Report</button>
Â  Â  Â  Â  Â  Â  Â  <button class="btn primary" onclick="updateEmergencyContact()">Save Contact</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  </div>
Â  Â  </section>

Â  Â  <section id="settings" class="screen">
Â  Â  Â  <div class="container section">
Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px" class="title">â† <button class="btn ghost" data-goto="welcome">Back</button> Settings</div>
Â  Â  Â  Â  <div class="row" style="margin-top:12px">
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Privacy</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c muted">RideWise is SFU-only with email verification. We never sell personal data. Aggregate, anonymized commute stats may be shared with SFU for sustainability reporting.</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  <div class="card-h"><strong>Notifications</strong></div>
Â  Â  Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  Â  Â  <label class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px"><span>Ride requests</span><input type="checkbox" class="switch" checked></label>
Â  Â  Â  Â  Â  Â  Â  <label class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:8px"><span>Messages</span><input type="checkbox" class="switch"></label>
Â  Â  Â  Â  Â  Â  Â  <label class="pill" style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:8px"><span>Rewards & challenges</span><input type="checkbox" class="switch"></label>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  </main>

Â  Â  <nav class="bottom-nav">
Â  Â  <button class="nav-item active" data-nav="welcome">
Â  Â  Â  <span class="nav-icon">ğŸ </span>
Â  Â  Â  Home
Â  Â  </button>
Â  Â  <button class="nav-item" data-nav="home">
Â  Â  Â  <span class="nav-icon">ğŸ”</span>
Â  Â  Â  Search
Â  Â  </button>
Â  Â  <button class="nav-item" data-nav="rewards">
Â  Â  Â  <span class="nav-icon">ğŸ†</span>
Â  Â  Â  Rewards
Â  Â  </button>
Â  Â  <button class="nav-item" data-nav="messages">
Â  Â  Â  <span class="nav-icon">ğŸ’¬</span>
Â  Â  Â  Messages
Â  Â  </button>
Â  Â  <button class="nav-item" data-nav="profile">
Â  Â  Â  <span class="nav-icon">ğŸ‘¤</span>
Â  Â  Â  Profile
Â  Â  </button>
Â  </nav>

Â  <script>
Â  Â  // -------- State --------
Â  Â  const state = {
Â  Â  Â  screen: 'welcome',
Â  Â  Â  userName: 'Guest Rider',
Â  Â  Â  isVerified: false,
Â  Â  Â  asDriver: false,
Â  Â  Â  asRider: true,
Â  Â  Â  carpoolMode: true,
Â  Â  Â  friendsOnly: false,
Â  Â  Â  genderPref: 'any',
Â  Â  Â  query: '',
Â  Â  Â  timeFilter: '',
Â  Â  Â  courseFilter: 'none',Â 
Â  Â  Â  selectedRideId: null,
Â  Â  Â  selectedChatId: null,Â 
Â  Â  Â  points: 250,
Â  Â  Â  co2SavedKg: 55.8,
Â  Â  Â  ridesCompleted: 8,
Â  Â  Â  newFriendsRiddenWith: 1,
Â  Â  Â  carMake: 'Honda',
Â  Â  Â  carModel: 'Civic',
Â  Â  Â  rideEtiquette: ['Quiet', 'Mask friendly'],Â 
Â  Â  Â  emergencyContact: { name: 'Sarah Doe', phone: '555-123-4567' },Â 
Â  Â  Â  contacts: [
Â  Â  Â  Â  {name: 'Kaidin SD', initials: 'KS', isFriend: true, rating: 4.8},
Â  Â  Â  Â  {name: 'Annika Tan', initials: 'AT', isFriend: true, rating: 5.0},
Â  Â  Â  Â  {name: 'Rex F', initials: 'RF', isFriend: false, rating: 4.6},
Â  Â  Â  Â  {name: 'Lucas Li', initials: 'LL', isFriend: false, rating: 4.7}
Â  Â  Â  ],
Â  Â  Â  userCourses: ['cmpt300', 'bus343']Â 
Â  Â  };

Â  Â  /** Mock rides seeded along the Production Way âœ SFU Burnaby corridor */
Â  Â  const RIDES = [
Â  Â  Â  {id:'r1', driver:'Kaidin SD', driverInitials:'KS', rating:4.8, seats:2, departTime:'08:40', from:'Production Wayâ€“University Station', to:'SFU Burnaby', costShare:2, notes:'Quiet ride, no food please', gender:'any', car:'Honda Civic', etiquette:['Quiet', 'No food'], courses: ['cmpt300']},Â 
Â  Â  Â  {id:'r2', driver:'Annika Tan', driverInitials:'AT', rating:5.0, seats:1, departTime:'09:10', from:'Lougheed Town Centre', to:'SFU Burnaby', costShare:3, notes:'Music okay, can chat', gender:'female', car:'Toyota Corolla', etiquette:['Music OK', 'Women-only'], courses: ['bus343']},Â 
Â  Â  Â  {id:'r3', driver:'Lucas Li', driverInitials:'LL', rating:4.6, seats:3, departTime:'10:05', from:'Metrotown Station', to:'SFU Burnaby', costShare:2, notes:'Friends-only mode OFF', gender:'any', car:'Ford Escape', etiquette:['Mask friendly', 'Trunk space limited'], courses: []}
Â  Â  ];

Â  Â  /** Mock chats */
Â  Â  const CHATS = {Â 
Â  Â  Â  'chat-maya': {
Â  Â  Â  Â  partner: 'Annika Tan',
Â  Â  Â  Â  initials: 'AT',
Â  Â  Â  Â  color: '#fef3c7',
Â  Â  Â  Â  messages: [
Â  Â  Â  Â  Â  {type: 'in', text: 'Hey, I just joined your ride to SFU Burnaby!'},
Â  Â  Â  Â  Â  {type: 'out', text: 'Awesome! Glad to have you. Just confirming pickup is at Lougheed Town Centre at 9:10.'},
Â  Â  Â  Â  Â  {type: 'in', text: 'Yep, sounds good! Just checking on the pickup spot...'}
Â  Â  Â  Â  ]
Â  Â  Â  },
Â  Â  Â  'chat-alex': {
Â  Â  Â  Â  partner: 'Kaidin SD',
Â  Â  Â  Â  initials: 'KS',
Â  Â  Â  Â  color: '#ffe4e6',
Â  Â  Â  Â  messages: [
Â  Â  Â  Â  Â  {type: 'in', text: 'See you at 8:40!'},
Â  Â  Â  Â  Â  {type: 'out', text: 'Perfect timing, traffic should be light then. See you!'}
Â  Â  Â  Â  ]
Â  Â  Â  },
Â  Â  Â  'chat-group': {
Â  Â  Â  Â  partner: 'SFU Bus Loop Group Chat',
Â  Â  Â  Â  initials: 'GS',
Â  Â  Â  Â  color: '#f1f5f9',
Â  Â  Â  Â  messages: [
Â  Â  Â  Â  Â  {type: 'in', sender: 'Rex', text: 'Running 2 mins late, guys.'},
Â  Â  Â  Â  Â  {type: 'in', sender: 'Kaidin', text: 'No worries!'}
Â  Â  Â  Â  ]
Â  Â  Â  }
Â  Â  };

Â  Â  /** Environmental Trophies */
Â  Â  const TROPHIES = [
Â  Â  Â  { id: 1, icon: 'ğŸŒ±', title: 'Seedling', caption: '10 kg COâ‚‚ saved', threshold: 10 },
Â  Â  Â  { id: 2, icon: 'ğŸŒ³', title: 'Sapling', caption: '50 kg COâ‚‚ saved', threshold: 50 },
Â  Â  Â  { id: 3, icon: 'ğŸŒ²', title: 'Forest Starter', caption: '100 kg COâ‚‚ saved', threshold: 100 },
Â  Â  Â  { id: 4, icon: 'ğŸŒ', title: 'Eco Champion', caption: '500 kg COâ‚‚ saved', threshold: 500 }
Â  Â  ];
Â  Â Â 
Â  Â  /** Daily Missions */
Â  Â  const MISSIONS = [
Â  Â  Â  { id: 1, icon: 'ğŸ¤', text: 'Share a ride (complete 1 carpool)', reward: 20, completed: state.ridesCompleted > 0, buttonText: 'Find Ride' },
Â  Â  Â  { id: 2, icon: 'ğŸŒ¿', text: 'Save 1 kg of COâ‚‚ (daily bonus)', reward: 5, completed: state.co2SavedKg > 55, buttonText: 'View Impact' },
Â  Â  Â  { id: 3, icon: 'ğŸ¥³', text: 'Make a new friend (ride with a new contact)', reward: 30, completed: state.newFriendsRiddenWith > 0, buttonText: 'Invite Friend' }
Â  Â  ];


Â  Â  // -------- Emergency Contact Logic --------
Â  Â  function updateEmergencyContact() {
Â  Â  Â  const name = document.getElementById('ecName').value.trim();
Â  Â  Â  const phone = document.getElementById('ecPhone').value.trim();
Â  Â  Â Â 
Â  Â  Â  if (!name || !phone) {
Â  Â  Â  Â  alert('Please enter both a name and a phone number for your emergency contact.');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  state.emergencyContact = { name, phone };
Â  Â  Â  alert(`Emergency contact (${name}) updated.`);
Â  Â  }

Â  Â  // -------- Chat Initiation Logic --------
Â  Â  function initiateNewChat() {
Â  Â  Â  const query = document.getElementById('newChatInput').value.trim();
Â  Â  Â  if (!query) {
Â  Â  Â  Â  alert('Please enter a contact name to start a new chat.');
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  const contact = state.contacts.find(c => c.name.toLowerCase().includes(query.toLowerCase()));

Â  Â  Â  if (contact) {
Â  Â  Â  Â  const newChatId = `chat-${contact.initials.toLowerCase()}-${Date.now()}`;
Â  Â  Â  Â  CHATS[newChatId] = {
Â  Â  Â  Â  Â  partner: contact.name,
Â  Â  Â  Â  Â  initials: contact.initials,
Â  Â  Â  Â  Â  color: contact.initials === 'AT' ? '#fef3c7' : (contact.initials === 'KS' ? '#ffe4e6' : '#f1f5f9'),
Â  Â  Â  Â  Â  messages: [
Â  Â  Â  Â  Â  Â  {type: 'out', text: `Hello ${contact.name.split(' ')[0]}, let's connect for the carpool!`}
Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  };
Â  Â  Â  Â  showChat(newChatId);

Â  Â  Â  } else if (query.toLowerCase().includes('rex')) {
Â  Â  Â  Â  const newChatId = `chat-rf-${Date.now()}`;
Â  Â  Â  Â  CHATS[newChatId] = {
Â  Â  Â  Â  Â  partner: 'Rex F',
Â  Â  Â  Â  Â  initials: 'RF',
Â  Â  Â  Â  Â  color: '#f1f5f9',
Â  Â  Â  Â  Â  messages: [
Â  Â  Â  Â  Â  Â  {type: 'out', text: 'Hey Rex, I saw your post. Can I join your ride to campus?'}
Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  };
Â  Â  Â  Â  showChat(newChatId);
Â  Â  Â  } else {
Â  Â  Â  Â  alert(`Could not find a match for "${query}". Please try "Rex", "Kaidin", or "Annika" to start a new chat. (This is a demo search.)`);
Â  Â  Â  }
Â  Â  Â  document.getElementById('newChatInput').value = '';
Â  Â  }
Â  Â Â 
Â  Â  // -------- Custom Location Toggle Logic --------
Â  Â  function setupOfferScreenListeners() {
Â  Â  Â  const fromSelect = document.getElementById('offerFrom');
Â  Â  Â  const toSelect = document.getElementById('offerTo');
Â  Â  Â  const customContainer = document.getElementById('customLocations');
Â  Â  Â Â 
Â  Â  Â  function toggleCustomFields() {
Â  Â  Â  Â  const isCustomSelected = fromSelect.value === 'Custom' || toSelect.value === 'Custom';
Â  Â  Â  Â  customContainer.classList.toggle('hidden', !isCustomSelected);
Â  Â  Â  }

Â  Â  Â  fromSelect.addEventListener('change', toggleCustomFields);
Â  Â  Â  toSelect.addEventListener('change', toggleCustomFields);
Â  Â  Â  toggleCustomFields();
Â  Â  }
Â  Â Â 
Â  Â  // -------- Onboarding/Verification Logic --------
Â  Â  function completeOnboarding(){
Â  Â  Â  const name = document.getElementById('onboardName').value.trim();
Â  Â  Â  const studentId = document.getElementById('onboardStudentId').value.trim();
Â  Â  Â  const email = document.getElementById('onboardEmail').value.trim();
Â  Â  Â  const driverMode = document.getElementById('asDriver').checked;
Â  Â  Â  const riderMode = document.getElementById('asRider').checked;

Â  Â  Â  if(!name || !studentId || !email){
Â  Â  Â  Â  alert('Please enter your full name, SFU Student ID, and SFU Email to verify.');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  if(!driverMode && !riderMode){
Â  Â  Â  Â  alert('Please select at least one mode (Driver or Rider).');
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  state.userName = name;
Â  Â  Â  state.isVerified = true;
Â  Â  Â  state.asDriver = driverMode;
Â  Â  Â  state.asRider = riderMode;
Â  Â  Â Â 
Â  Â  Â  document.querySelectorAll('#onboard [data-gender]').forEach(btn=>{
Â  Â  Â  Â  if(btn.classList.contains('primary')){
Â  Â  Â  Â  Â  state.genderPref = btn.getAttribute('data-gender');
Â  Â  Â  Â  }
Â  Â  Â  });

Â  Â  Â  alert(`Verification successful! Welcome back, ${state.userName.split(' ')[0]}!`);
Â  Â  Â Â 
Â  Â  Â  if(state.asDriver){
Â  Â  Â  Â  show('registerCar');
Â  Â  Â  } else {
Â  Â  Â  Â  show('home');
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  // -------- Car Registration Logic --------
Â  Â  function completeCarRegistration(){
Â  Â  Â  const make = document.getElementById('carMake').value.trim();
Â  Â  Â  const model = document.getElementById('carModel').value.trim();
Â  Â  Â  const plate = document.getElementById('carPlate').value.trim();

Â  Â  Â  if(!make || !model || !plate){
Â  Â  Â  Â  alert('Please enter your car make, model, and license plate.');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  state.carMake = make;
Â  Â  Â  state.carModel = model;
Â  Â  Â Â 
Â  Â  Â  alert(`Car registered: ${make} ${model}. You are now ready to offer rides!`);
Â  Â  Â  show('home');
Â  Â  }

Â  Â  // -------- Etiquette Listener Logic --------
Â  Â  function setupEtiquetteListeners() {
Â  Â  Â  document.querySelectorAll('#etiquetteOptions [data-etiquette]').forEach(btn => {
Â  Â  Â  Â  const etiquette = btn.getAttribute('data-etiquette');

Â  Â  Â  Â  if (state.rideEtiquette.includes(etiquette)) {
Â  Â  Â  Â  Â  btn.classList.add('primary');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  btn.classList.remove('primary');
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  btn.onclick = null;

Â  Â  Â  Â  btn.onclick = () => {
Â  Â  Â  Â  Â  if (state.rideEtiquette.includes(etiquette)) {
Â  Â  Â  Â  Â  Â  state.rideEtiquette = state.rideEtiquette.filter(e => e !== etiquette);
Â  Â  Â  Â  Â  Â  btn.classList.remove('primary');
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  state.rideEtiquette.push(etiquette);
Â  Â  Â  Â  Â  Â  btn.classList.add('primary');
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  Â  });
Â  Â  }


Â  Â  // -------- Routing --------
Â  Â  function show(screen){
Â  Â  Â  if(screen==='messages'){
Â  Â  Â  Â  state.selectedChatId = null;
Â  Â  Â  }
Â  Â  Â  state.screen = screen;
Â  Â  Â  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
Â  Â  Â  document.getElementById(screen).classList.add('active');
Â  Â  Â Â 
Â  Â  Â  // Update Nav Bar State
Â  Â  Â  document.querySelectorAll('.nav-item').forEach(item => {
Â  Â  Â  Â  item.classList.remove('active');
Â  Â  Â  Â  if (item.getAttribute('data-nav') === screen) {
Â  Â  Â  Â  Â  item.classList.add('active');
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  if(screen==='welcome'){ renderWelcome(); }
Â  Â  Â  if(screen==='home'){ renderHome(); }Â 
Â  Â  Â  if(screen==='find'){ renderFind(); }
Â  Â  Â  if(screen==='rewards'){ renderRewards(); }
Â  Â  Â  if(screen==='details'){Â 
Â  Â  Â  Â  if(state.selectedChatId){
Â  Â  Â  Â  Â  renderChatDetails();
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  renderDetails();
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  if(screen==='profile'){ renderProfile(); }Â 
Â  Â  Â  if(screen==='offer'){ setupOfferScreenListeners(); }Â 
Â  Â  }

Â  Â  document.querySelectorAll('[data-goto]').forEach(btn=>btn.addEventListener('click', e=>{
Â  Â  Â  const to = e.currentTarget.getAttribute('data-goto');
Â  Â  Â  show(to);
Â  Â  }));
Â  Â  document.querySelectorAll('[data-nav]').forEach(btn=>btn.addEventListener('click', e=>{
Â  Â  Â  const to = e.currentTarget.getAttribute('data-nav');
Â  Â  Â  show(to);
Â  Â  }));
Â  Â Â 
Â  Â  function showChat(chatId) {
Â  Â  Â  state.selectedRideId = null;
Â  Â  Â  state.selectedChatId = chatId;
Â  Â  Â  show('details');
Â  Â  }

Â  Â  // gender pref buttons
Â  Â  document.querySelectorAll('[data-gender]').forEach(btn=>btn.addEventListener('click', e=>{
Â  Â  Â  const group = e.currentTarget.parentElement;
Â  Â  Â  group.querySelectorAll('.btn').forEach(b=>b.classList.remove('primary'));
Â  Â  Â  e.currentTarget.classList.add('primary');
Â  Â  Â  if(state.screen !== 'onboard'){
Â  Â  Â  Â  state.genderPref = e.currentTarget.getAttribute('data-gender');
Â  Â  Â  }
Â  Â  }));

Â  Â  function renderProfile(){
Â  Â  Â  const nameEl = document.getElementById('profileName');
Â  Â  Â  const avatarEl = document.getElementById('profileAvatar');
Â  Â  Â  const contactsListEl = document.getElementById('contactsList');
Â  Â  Â Â 
Â  Â  Â  if(state.isVerified){
Â  Â  Â  Â  const initials = state.userName.split(' ').map(n=>n[0]).join('').toUpperCase().substring(0,2);
Â  Â  Â  Â  if(nameEl) nameEl.textContent = state.userName;
Â  Â  Â  Â  if(avatarEl) avatarEl.textContent = initials;
Â  Â  Â  Â  document.getElementById('pfCarpool').checked = state.carpoolMode;
Â  Â  Â  Â  document.getElementById('pfFriends').checked = state.friendsOnly;
Â  Â  Â  } else {
Â  Â  Â  Â  if(nameEl) nameEl.textContent = 'Guest Rider';
Â  Â  Â  Â  if(avatarEl) avatarEl.textContent = 'GR';
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  setupEtiquetteListeners();
Â  Â  Â Â 
Â  Â  Â  contactsListEl.innerHTML = `<p class="muted" style="font-size:14px;margin-bottom:8px">Friends are automatically trusted and exempt from "Friends-only mode" rides.</p>`;

Â  Â  Â  state.contacts.forEach(c => {
Â  Â  Â  Â  const row = document.createElement('div');
Â  Â  Â  Â  row.className = 'row-item';
Â  Â  Â  Â  const friendBadge = c.isFriend ? '<span class="badge" style="background:#d1fae5">â˜… Friend</span>' : '';
Â  Â  Â  Â  row.innerHTML = `<div class="avatar">${c.initials}</div>
Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  <div class="title" style="display:flex;align-items:center;gap:8px">${c.name} ${friendBadge}</div>
Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Rating: ${c.rating.toFixed(1)}</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <button class="btn ghost">${c.isFriend ? 'Unfriend' : 'Add Friend'}</button>`;
Â  Â  Â  Â  contactsListEl.appendChild(row);
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  if(state.emergencyContact){
Â  Â  Â  Â  document.getElementById('ecName').value = state.emergencyContact.name;
Â  Â  Â  Â  document.getElementById('ecPhone').value = state.emergencyContact.phone;
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  function renderWelcome() {
Â  Â  Â  // Update Impact values on the welcome screen
Â  Â  Â  document.getElementById('homeRides').textContent = state.ridesCompleted;
Â  Â  Â  document.getElementById('homeSaved').textContent = `$${(state.ridesCompleted * 2.5).toFixed(0)}`; // Mock calculation
Â  Â  Â  document.getElementById('homeCo2').textContent = `${state.co2SavedKg.toFixed(0)}kg`;
Â  Â  }

Â  Â  // -------- Filtering logic --------
Â  Â  function getFilteredRides(){
Â  Â  Â  return RIDES.filter(r=>{
Â  Â  Â  Â  const matchesQuery = state.query ? (r.driver + ' ' + r.from + ' ' + r.to).toLowerCase().includes(state.query.toLowerCase()) : true;
Â  Â  Â  Â  const matchesTime = state.timeFilter ? r.departTime >= state.timeFilter : true;
Â  Â  Â  Â  const matchesGender = state.genderPref==='any' ? true : r.gender===state.genderPref;
Â  Â  Â  Â  const matchesCourse = state.courseFilter === 'none' ? true : r.courses.some(c => state.userCourses.includes(c));

Â  Â  Â  Â  return matchesQuery && matchesTime && matchesGender && matchesCourse;
Â  Â  Â  });
Â  Â  }

Â  Â  // -------- Home rendering (now acts as the Search/Feed screen) --------
Â  Â  function renderHome(){
Â  Â  Â  const greetingEl = document.getElementById('home-greeting');
Â  Â  Â  if(greetingEl){
Â  Â  Â  Â  if(state.isVerified){
Â  Â  Â  Â  Â  greetingEl.innerHTML = `<h2 class="title" style="font-size:24px;">Find a Ride, ${state.userName.split(' ')[0]}!</h2><div class="muted">Search or browse available carpools.</div>`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  greetingEl.innerHTML = `<h2 class="title" style="font-size:24px;">Welcome to RideWise!</h2><div class="muted">Please <button class="btn ghost" style="padding:0" data-goto="onboard">verify your profile</button> to post or join rides.</div>`;
Â  Â  Â  Â  Â  greetingEl.querySelector('[data-goto="onboard"]').onclick = ()=>show('onboard');
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  const search = document.getElementById('search');
Â  Â  Â  search.value = state.query;
Â  Â  Â  search.oninput = (e)=>{ state.query = e.target.value; renderHome(); };

Â  Â  Â  const list = document.getElementById('rideList');
Â  Â  Â  const count = document.getElementById('count');
Â  Â  Â  list.innerHTML='';

Â  Â  Â  const filtered = getFilteredRides();
Â  Â  Â  count.textContent = filtered.length + ' ride(s)';

Â  Â  Â  filtered.forEach(r=>{
Â  Â  Â  Â  const row = document.createElement('button');
Â  Â  Â  Â  row.className = 'row-item';
Â  Â  Â  Â  const courseBadges = r.courses.length > 0 ? r.courses.map(c => `<span class="badge" style="background:#e0f2f1">${c.toUpperCase()}</span>`).join(' ') : '';
Â  Â  Â  Â Â 
Â  Â  Â  Â  row.innerHTML = `<div class="avatar">${r.driverInitials}</div>
Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap"><strong>${r.driver}</strong> <span class="badge">â­ ${r.rating.toFixed(1)}</span> ${courseBadges}</div>
Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${r.from} â†’ ${r.to}</div>
Â  Â  Â  Â  Â  Â  <div class="muted" style="display:flex;gap:12px;font-size:14px;margin-top:4px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  <span>â° ${r.departTime}</span>
Â  Â  Â  Â  Â  Â  Â  <span>ğŸ‘¥ ${r.seats} seats</span>
Â  Â  Â  Â  Â  Â  Â  <span>ğŸ’² ~$${r.costShare}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <span>â€º</span>`;
Â  Â  Â  Â  row.onclick = ()=>{ state.selectedRideId = r.id; state.selectedChatId = null; show('details'); };
Â  Â  Â  Â  list.appendChild(row);
Â  Â  Â  });

Â  Â  Â  document.getElementById('co2').textContent = state.co2SavedKg.toFixed(1);
Â  Â  }
Â  Â Â 
Â  Â  // -------- postRide function --------
Â  Â  document.getElementById('postRide').addEventListener('click', ()=>{
Â  Â  Â  const fromSelect = document.getElementById('offerFrom').value;
Â  Â  Â  const toSelect = document.getElementById('offerTo').value;
Â  Â  Â Â 
Â  Â  Â  if(state.asDriver && (!state.carMake || !state.carModel)){
Â  Â  Â  Â  alert('Please complete your car registration details first. Go to Profile > Register Car.');
Â  Â  Â  Â  show('registerCar');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  if(!state.isVerified){
Â  Â  Â  Â  alert('Please verify your profile first to post a ride.');
Â  Â  Â  Â  show('onboard');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  const finalFrom = fromSelect === 'Custom'Â 
Â  Â  Â  Â  Â  ? document.getElementById('offerFromCustom').value || 'Custom Pickup'
Â  Â  Â  Â  Â  : fromSelect;

Â  Â  Â  const finalTo = toSelect === 'Custom'
Â  Â  Â  Â  Â  ? document.getElementById('offerToCustom').value || 'Custom Dropoff'
Â  Â  Â  Â  Â  : toSelect;
Â  Â  Â  Â  Â Â 
Â  Â  Â  if (!finalFrom || !finalTo) {
Â  Â  Â  Â  alert('Please select or enter both a valid From and To location.');
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  const departTime = document.getElementById('offerTime').value || '09:00';
Â  Â  Â  const seats = Math.max(1, parseInt(document.getElementById('offerSeats').value||'2',10));
Â  Â  Â  const costShare = parseFloat(document.getElementById('offerCost').value||'2');
Â  Â  Â  const notes = document.getElementById('offerNotes').value;
Â  Â  Â Â 
Â  Â  Â  const rideCourses = [];

Â  Â  Â  const newRide = {
Â  Â  Â  Â  id:'r'+(RIDES.length+1),
Â  Â  Â  Â  driver:state.userName.split(' ')[0]||'You',
Â  Â  Â  Â  driverInitials:state.userName.split(' ').map(n=>n[0]).join('').toUpperCase().substring(0,2),
Â  Â  Â  Â  rating:5.0,
Â  Â  Â  Â  seats,
Â  Â  Â  Â  departTime,
Â  Â  Â  Â  from:finalFrom,
Â  Â  Â  Â  to:finalTo,
Â  Â  Â  Â  costShare,
Â  Â  Â  Â  notes,
Â  Â  Â  Â  gender:state.genderPref,
Â  Â  Â  Â  car: state.carMake + ' ' + state.carModel,
Â  Â  Â  Â  etiquette: [...state.rideEtiquette],
Â  Â  Â  Â  courses: rideCourses
Â  Â  Â  };
Â  Â  Â  RIDES.unshift(newRide);
Â  Â  Â  state.points += 5;
Â  Â  Â  state.co2SavedKg = +(state.co2SavedKg + 1.2).toFixed(1);
Â  Â  Â  state.ridesCompleted += 1;
Â  Â  Â  alert('Ride posted! (demo)');
Â  Â  Â  show('home');
Â  Â  });

Â  Â  function renderFind(){
Â  Â  Â  document.getElementById('filterTime').value = state.timeFilter;
Â  Â  Â Â 
Â  Â  Â  document.querySelectorAll('[data-course-filter]').forEach(btn => {
Â  Â  Â  Â  if (btn.getAttribute('data-course-filter') === state.courseFilter) {
Â  Â  Â  Â  Â  btn.classList.add('primary');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  btn.classList.remove('primary');
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  Â  document.querySelectorAll('[data-gender-filter]').forEach(btn => {
Â  Â  Â  Â  if (btn.getAttribute('data-gender-filter') === state.genderPref) {
Â  Â  Â  Â  Â  btn.classList.add('primary');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  btn.classList.remove('primary');
Â  Â  Â  Â  }
Â  Â  Â  });

Â  Â  Â  const res = document.getElementById('results');
Â  Â  Â  const resultsCount = document.getElementById('resultsCount');
Â  Â  Â  res.innerHTML='';

Â  Â  Â  const filtered = getFilteredRides();
Â  Â  Â  resultsCount.textContent = filtered.length + ' match(es)';

Â  Â  Â  filtered.forEach(r=>{
Â  Â  Â  Â  const row = document.createElement('button');
Â  Â  Â  Â  row.className = 'row-item';
Â  Â  Â  Â  const courseBadges = r.courses.length > 0 ? r.courses.map(c => `<span class="badge" style="background:#e0f2f1">${c.toUpperCase()}</span>`).join(' ') : '';
Â  Â  Â  Â Â 
Â  Â  Â  Â  row.innerHTML = `<div class="avatar">${r.driverInitials}</div>
Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap"><strong>${r.driver}</strong> <span class="badge">â­ ${r.rating.toFixed(1)}</span> ${courseBadges}</div>
Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${r.from} â†’ ${r.to}</div>
Â  Â  Â  Â  Â  Â  <div class="muted" style="display:flex;gap:12px;font-size:14px;margin-top:4px;flex-wrap:wrap">
Â  Â  Â  Â  Â  Â  Â  <span>â° ${r.departTime}</span>
Â  Â  Â  Â  Â  Â  Â  <span>ğŸ‘¥ ${r.seats} seats</span>
Â  Â  Â  Â  Â  Â  Â  <span>ğŸ’² ~$${r.costShare}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <span>â€º</span>`;
Â  Â  Â  Â  row.onclick = ()=>{ state.selectedRideId = r.id; state.selectedChatId = null; show('details'); };
Â  Â  Â  Â  res.appendChild(row);
Â  Â  Â  });
Â  Â  }

Â  Â  document.querySelector('[data-apply-filters]').addEventListener('click', ()=>{
Â  Â  Â  state.timeFilter = document.getElementById('filterTime').value;
Â  Â  Â  show('home');
Â  Â  });

Â  Â  document.querySelectorAll('[data-gender-filter]').forEach(btn=>btn.addEventListener('click', e=>{
Â  Â  Â  const group = e.currentTarget.parentElement;
Â  Â  Â  group.querySelectorAll('.btn').forEach(b=>b.classList.remove('primary'));
Â  Â  Â  e.currentTarget.classList.add('primary');
Â  Â  Â Â 
Â  Â  Â  state.genderPref = e.currentTarget.getAttribute('data-gender-filter');
Â  Â  Â  renderFind();
Â  Â  }));

Â  Â  document.querySelectorAll('[data-course-filter]').forEach(btn=>btn.addEventListener('click', e=>{
Â  Â  Â  const group = e.currentTarget.parentElement;
Â  Â  Â  group.querySelectorAll('.btn').forEach(b=>b.classList.remove('primary'));
Â  Â  Â  e.currentTarget.classList.add('primary');
Â  Â  Â Â 
Â  Â  Â  state.courseFilter = e.currentTarget.getAttribute('data-course-filter');
Â  Â  Â  renderFind();
Â  Â  }));
Â  Â Â 
Â  Â  // NEW: renderChatDetails
Â  Â  function renderChatDetails() {
Â  Â  Â  const card = document.getElementById('detailsCard');
Â  Â  Â  const header = document.getElementById('detailsHeader');
Â  Â  Â  const chat = CHATS[state.selectedChatId];
Â  Â  Â Â 
Â  Â  Â  if (!chat) { card.innerHTML = '<div class="card-c">No chat selected.</div>'; return; }
Â  Â  Â Â 
Â  Â  Â  header.innerHTML = `â† <button class="btn ghost" onclick="show('messages')">Back</button> ${chat.partner}`;

Â  Â  Â  const messageHistory = chat.messages.map(m => {
Â  Â  Â  Â  const senderName = m.sender ? m.sender + ': ' : '';
Â  Â  Â  Â  return `<div class="message ${m.type}">${senderName}${m.text}</div>`;
Â  Â  Â  }).join('');

Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  <div class="card-h" style="justify-content:space-between">
Â  Â  Â  Â  Â  <div style="display:flex;align-items:center;gap:10px">
Â  Â  Â  Â  Â  Â  <div class="avatar" style="background:${chat.color}">${chat.initials}</div>
Â  Â  Â  Â  Â  Â  <strong>${chat.partner}</strong>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <button class="btn ghost">ğŸ“ Call (Mock)</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  <div class="chat-box">${messageHistory}</div>
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;margin-top:12px">
Â  Â  Â  Â  Â  Â  <input class="input" placeholder="Type your message..." />
Â  Â  Â  Â  Â  Â  <button class="btn primary">Send</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>`;
Â  Â  }

Â  Â  function renderDetails(){
Â  Â  Â  const card = document.getElementById('detailsCard');
Â  Â  Â  const header = document.getElementById('detailsHeader');
Â  Â  Â  const ride = RIDES.find(r=>r.id===state.selectedRideId);
Â  Â  Â Â 
Â  Â  Â  if(!ride){ card.innerHTML = '<div class="card-c">No ride selected.</div>'; return; }
Â  Â  Â Â 
Â  Â  Â  header.innerHTML = `â† <button class="btn ghost" onclick="show('home')">Back</button> Ride details`;

Â  Â  Â  const carDetail = ride.car ? `<div class="pill" style="display:flex;align-items:center;justify-content:space-between"><span>ğŸš— Vehicle</span><strong>${ride.car}</strong></div>` : '';
Â  Â  Â Â 
Â  Â  Â  const etiquetteHtml = ride.etiquette && ride.etiquette.length > 0
Â  Â  Â  Â  Â  ? ride.etiquette.map(e => `<span class="k">${e}</span>`).join('')
Â  Â  Â  Â  Â  : '<span class="muted">No specific etiquette requested.</span>';
Â  Â  Â  Â  Â Â 
Â  Â  Â  const courseHtml = ride.courses && ride.courses.length > 0
Â  Â  Â  Â  Â  ? ride.courses.map(c => `<span class="k" style="background:#e0f2f1">ğŸ“š ${c.toUpperCase()} Match</span>`).join('')
Â  Â  Â  Â  Â  : '<span class="muted">Not associated with a specific course.</span>';

Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  <div class="card-h">
Â  Â  Â  Â  Â  <div class="avatar">${ride.driverInitials}</div>
Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  <div class="title" style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">${ride.driver} <span class="badge">â­ ${ride.rating.toFixed(1)}</span></div>
Â  Â  Â  Â  Â  Â  <div class="muted" style="font-size:14px">Verified SFU Student</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="card-c">
Â  Â  Â  Â  Â  <div class="grid-2">
Â  Â  Â  Â  Â  Â  <div class="pill">
Â  Â  Â  Â  Â  Â  Â  <div class="label">Route</div>
Â  Â  Â  Â  Â  Â  Â  <div class="title" style="font-weight:600">${ride.from} â†’ ${ride.to}</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between"><span>â° Departure</span><strong>${ride.departTime}</strong></div>
Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between"><span>ğŸ‘¥ Seats</span><strong>${ride.seats}</strong></div>
Â  Â  Â  Â  Â  Â  <div class="pill" style="display:flex;align-items:center;justify-content:space-between"><span>ğŸ’² Cost share</span><strong>~$${ride.costShare}</strong></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="grid-2" style="margin-top:8px">
Â  Â  Â  Â  Â  Â  ${carDetail}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div class="pill" style="margin-top:8px">
Â  Â  Â  Â  Â  Â  <div class="label">Linked Courses</div>
Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;flex-wrap:wrap">${courseHtml}</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div class="pill" style="margin-top:8px">
Â  Â  Â  Â  Â  Â  <div class="label">Ride Etiquette</div>
Â  Â  Â  Â  Â  Â  <div style="display:flex;gap:8px;flex-wrap:wrap">${etiquetteHtml}</div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  ${ride.notes?`<div class="pill" style="margin-top:8px"><strong>Notes:</strong> <span class="muted">${ride.notes}</span></div>`:''}
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div class="grid-actions" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  <button class="btn brand" id="reqJoin" ${state.isVerified ? '' : 'disabled'}>Request to join</button>
Â  Â  Â  Â  Â  Â  <button class="btn" onclick="showChat('chat-alex')">ğŸ’¬ Message</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="grid-3" style="margin-top:12px">
Â  Â  Â  Â  Â  Â  <div class="k">ğŸ” Safety: live-share ETA, SOS, check-ins (demo)</div>
Â  Â  Â  Â  Â  Â  <div class="k">ğŸ†˜ Emergency Contact: ${state.emergencyContact ? state.emergencyContact.name : 'Not set'}</div>
Â  Â  Â  Â  Â  Â  <div class="k">ğŸŒ Impact: ~0.8 kg COâ‚‚ saved vs solo</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>`;
Â  Â  Â  if(document.getElementById('reqJoin')) document.getElementById('reqJoin').onclick = ()=>{
Â  Â  Â  Â  state.points += 10;
Â  Â  Â  Â  state.co2SavedKg = +(state.co2SavedKg + 2.4).toFixed(1);
Â  Â  Â  Â  alert('Request sent! (demo)');
Â  Â  Â  Â  show('home');
Â  Â  Â  };
Â  Â  }

Â  Â  function renderRewards(){
Â  Â  Â  document.getElementById('points').textContent = state.points;
Â  Â  Â  document.getElementById('co2Big').textContent = state.co2SavedKg.toFixed(1);
Â  Â  Â  const lb = document.getElementById('leaderboard');
Â  Â  Â  lb.innerHTML = '';
Â  Â  Â Â 
Â  Â  Â  ['Annika Tan','Kaidin SD','Rex F','You'].forEach((n,i)=>{
Â  Â  Â  Â  const row = document.createElement('div');
Â  Â  Â  Â  row.className='row-item';
Â  Â  Â  Â  row.innerHTML = `<div style="display:flex;align-items:center;gap:8px">#${i+1}. ${n}</div><div style="margin-left:auto">${50 - i*10} kg COâ‚‚</div>`;
Â  Â  Â  Â  lb.appendChild(row);
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  let referralName = state.userName.split(' ')[0];
Â  Â  Â  if (referralName === 'Guest') {
Â  Â  Â  Â  referralName = 'JANE';Â 
Â  Â  Â  }
Â  Â  Â  const referralCode = `SFU-RIDE-${referralName.toUpperCase()}`;
Â  Â  Â Â 
Â  Â  Â  const codeElement = document.getElementById('referralCodeDisplay');
Â  Â  Â  if (codeElement) {
Â  Â  Â  Â  codeElement.textContent = referralCode;
Â  Â  Â  }

Â  Â  Â  const trophyGrid = document.getElementById('trophyGrid');
Â  Â  Â  trophyGrid.innerHTML = '';
Â  Â  Â Â 
Â  Â  Â  TROPHIES.forEach(trophy => {
Â  Â  Â  Â  const unlocked = state.co2SavedKg >= trophy.threshold;
Â  Â  Â  Â  const trophyItem = document.createElement('div');
Â  Â  Â  Â  trophyItem.className = `trophy-item ${unlocked ? 'unlocked' : ''}`;
Â  Â  Â  Â  trophyItem.innerHTML = `
Â  Â  Â  Â  Â  <span class="trophy-icon">${unlocked ? trophy.icon : 'ğŸ”’'}</span>
Â  Â  Â  Â  Â  <div class="trophy-title">${trophy.title}</div>
Â  Â  Â  Â  Â  <div class="trophy-caption">${trophy.caption}</div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  trophyGrid.appendChild(trophyItem);
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  const missionsBar = document.getElementById('missionsBar');
Â  Â  Â  missionsBar.innerHTML = '';
Â  Â  Â Â 
Â  Â  Â  MISSIONS.forEach(mission => {
Â  Â  Â  Â  const missionDiv = document.createElement('div');
Â  Â  Â  Â  missionDiv.className = `mission-item ${mission.completed ? 'complete' : ''}`;
Â  Â  Â  Â  missionDiv.innerHTML = `
Â  Â  Â  Â  Â  <span class="mission-icon">${mission.completed ? 'âœ…' : mission.icon}</span>
Â  Â  Â  Â  Â  <div class="mission-text">${mission.text}</div>
Â  Â  Â  Â  Â  <div class="mission-reward">
Â  Â  Â  Â  Â  Â  +${mission.reward} Pts
Â  Â  Â  Â  Â  Â  <button class="btn primary small" style="margin-left: 8px;" ${mission.completed ? 'disabled' : ''}>${mission.completed ? 'Completed' : mission.buttonText}</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  missionsBar.appendChild(missionDiv);
Â  Â  Â  });
Â  Â  }

Â  Â  // initial mount
Â  Â  renderWelcome();
Â  </script>
</body>
</html>